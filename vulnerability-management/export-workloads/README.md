# Export workload vulnerabilities via shell script

The `/v1/export/vuln-mgmt/workloads` API exports workload vulnerabilities in the form
of deployments and their associated images including image vulnerabilities.

The following sections provide use case examples utilizing either the shell or Python.

## Shell script

See `export-workloads.sh` for a shell script example based on `curl` and `jq`.

### Export all workloads
```shell
export-workloads.sh
```

### Export all workloads from the cluster `prod`
```shell
export-workloads.sh "Cluster%3Aprod"
```

### Export all workloads matching the query `Deployment:app Namespace:default`
```shell
export-workloads.sh "Deployment%3Aapp%2BNamespace%3Adefault"
```

### Export all workloads with a timeout of 60 seconds
```shell
export-workloads.sh "" 60
```

## Python script

See `export-workloads.py` for a python script example.

### Export all workloads
```shell
export-workloads.py
```

### Export all workloads from the cluster `prod`
```shell
export-workloads.py --query="Cluster%3Aprod"
```

### Export all workloads matching the query `Deployment:app Namespace:default`
```shell
export-workloads.py --query="Deployment%3Aapp%2BNamespace%3Adefault"
```

### Export all workloads with a timeout of 60 seconds
```shell
export-workloads.py --timeout=60
```
